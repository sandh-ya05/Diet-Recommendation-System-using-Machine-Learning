<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HealthyPlate - Alternative Index</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="bg-gray-100 font-sans">
  <nav class="navbar navbar-dark bg-success sticky-top">
      <div class="container flex justify-between items-center py-2">
          <a class="navbar-brand text-2xl font-bold" href="#">HealthyPlate</a>
          <div class="navbar-nav flex items-center">
              <a class="nav-link text-white px-3 py-2 hover:bg-green-700 rounded" href="{{ url_for('index') }}">Main Home</a>
              <a class="nav-link text-white px-3 py-2 hover:bg-green-700 rounded" href="{{ url_for('login_page') }}">Login</a>
              <a class="nav-link text-white px-3 py-2 hover:bg-green-700 rounded" href="{{ url_for('register_page') }}">Register</a>
          </div>
      </div>
  </nav>

  <section class="hero-bg text-white py-20">
      <div class="container mx-auto text-center">
          <h2 class="text-4xl md:text-5xl font-bold mb-4">Welcome to HealthyPlate (Alternative)</h2>
          <p class="text-lg md:text-xl mb-6">This is an alternative landing page.</p>
          <a href="{{ url_for('login_page') }}" class="btn btn-success px-6 py-3">Get Started</a>
      </div>
  </section>

  <div class="container mx-auto px-4 py-16 text-center">
      <h3 class="text-2xl font-bold mb-4">Explore More</h3>
      <p class="text-gray-700">You can customize this page or use it for different purposes.</p>
  </div>

  <footer class="bg-success text-white py-4">
      <div class="container mx-auto text-center">
          <p>Â© 2025 Design by Satkar Shrestha and Sandhya Gharti. All rights reserved.</p>
      </div>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
      // Show alert message (utility function)
      function showAlert(message, type) {
          const existingAlerts = document.querySelectorAll(".alert");
          existingAlerts.forEach((alert) => alert.remove());

          const alertDiv = document.createElement("div");
          alertDiv.className = `alert alert-${type} alert-dismissible fade show position-fixed`;
          alertDiv.style.top = "20px";
          alertDiv.style.right = "20px";
          alertDiv.style.zIndex = "9999";
          alertDiv.style.minWidth = "300px";

          alertDiv.innerHTML = `
              ${message}
              <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          `;
          document.body.appendChild(alertDiv);

          setTimeout(() => {
              if (alertDiv.parentNode) {
                  alertDiv.remove();
              }
          }, 5000);
      }

      // Logout function (common action)
      function logout() {
          if (confirm("Are you sure you want to logout?")) {
              fetch("/api/logout", {
                  method: "POST",
              })
              .then((response) => response.json())
              .then((data) => {
                  if (data.success) {
                      window.location.href = "/";
                  }
              })
              .catch((error) => {
                  console.error("Logout error:", error);
                  window.location.href = "/";
              });
          }
      }

      // Check authentication status on page load for general redirects
      document.addEventListener("DOMContentLoaded", () => {
          fetch("/api/auth-status")
              .then((response) => response.json())
              .then((data) => {
                  if (data.authenticated) {
                      currentUser = data.user || data.admin;
                      if (data.user_type === "admin") {
                          if (!window.location.pathname.startsWith("/admin")) {
                              window.location.href = "/admin";
                          }
                      } else {
                          if (window.location.pathname.startsWith("/admin")) {
                              window.location.href = "/"; // Redirect to main page after user login
                          }
                      }
                  } else {
                      if (window.location.pathname.startsWith("/diet-form") || window.location.pathname.startsWith("/admin")) {
                          window.location.href = "/";
                      }
                  }
              })
              .catch((error) => {
                  console.error("Error checking auth status:", error);
                  if (window.location.pathname.startsWith("/diet-form") || window.location.pathname.startsWith("/admin")) {
                      window.location.href = "/";
                  }
              });
      });
  </script>
</body>
</html>
